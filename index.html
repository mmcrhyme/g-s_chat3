<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/style.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="js/jquery-2.1.3.min.js"></script>
    <script src="./js/main.js"></script>
    <title>MARU CHAT</title>
</head>
<body>
    <div id="container">
        <div class="sign-three">
          <div class="restaurant">MARU</div>
          <div class="bar">Chat</div>
          <div class="jackpots">OPEN</div>
        </div>
    </div>
    <div id="login">
        <!-- Name -->
        <!-- <form action="./select.php" method="post"> -->
            <!-- <input type="text" id="name" name="name"> -->
            <!-- <button type="submit" id="send">OK</button> -->
            <button id="send" class="w-32 h-16 text-white-200 bg-black-700 hover:text-yellow-400">LOGIN</button>
        <!-- </form> -->
            <audio src="./entry.mp3" id="send1"></audio>
    </div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script type="module">

// $("button").on("click",function(){
//     $("#send1").get(0).play();
//     key = $("#name").val();
//     memo = 1;
//     localStorage.setItem(memo,key);
//     $("#name").val(key);
//     $('#container, #login').fadeOut(2000, function() {
//         setTimeout(function(){
//             window.location = "./select.html";
//         }, 1000);
//     });
// });

//###############################################
// 必要なFirebaseライブラリを読み込み
//###############################################
import { initializeApp } 
    from "https://www.gstatic.com/firebasejs/9.20.0/firebase-app.js";
import { getAuth, signInWithPopup, GoogleAuthProvider, signOut, onAuthStateChanged } 
    from "https://www.gstatic.com/firebasejs/9.20.0/firebase-auth.js";


//###############################################
//FirebaseConfig [ KEYを取得して設定！！ ]
//###############################################
const firebaseConfig = {
    apiKey: "AIzaSyAA-Xf8PaeF315SYFlWpbFDSj7HVnslQGo",
    authDomain: "g-s-chat-160a5.firebaseapp.com",
    databaseURL: "https://g-s-chat-160a5-default-rtdb.firebaseio.com",
    projectId: "g-s-chat-160a5",
    storageBucket: "g-s-chat-160a5.appspot.com",
    messagingSenderId: "554300368222",
    appId: "1:554300368222:web:baf0a3ca81964768b65bcf"
};
const app = initializeApp(firebaseConfig);


//###############################################
//GoogleAuth(認証用)
//###############################################
const provider = new GoogleAuthProvider();
provider.addScope('https://www.googleapis.com/auth/contacts.readonly');
const auth = getAuth();

//###############################################
//Login処理
//###############################################
$("#send").on("click",function(){
    //Google認証完了後の処理
    signInWithPopup(auth, provider).then((result) => {
        //Login後のページ遷移
        location.href="select.html";  
    }).catch((error) => {
        // Handle Errors here.
        const errorCode = error.code;
        const errorMessage = error.message;
        // The email of the user's account used.
        const email = error.email;
        // The AuthCredential type that was used.
        const credential = GoogleAuthProvider.credentialFromError(error);
        // ...
    });
});


</script>

</body>
</html>
